{"name": "Search Spending By Currency", "status": "failed", "statusDetails": {"message": "AssertionError: b'{\"spendDate\": \"2025-07-06T11:21:23.402Z\", \"category\": {\"id\": \"7598d1ac-e932-47d4-8376-077c06529903\", \"name\": \"administrationTest\", \"username\": \"asd\", \"archived\": false}, \"currency\": \"RUB\", \"amount\": 3572, \"description\": \"some\", \"username\": \"asd\"}'", "trace": "self = <tests.test_main.TestsSearchSpends object at 0x00000123BF371BD0>, page = <Page url='http://frontend.niffler.dc/main'>\ncreated_spend = SpendCreate(id='845275ff-259c-4dea-bbd7-1a93de21271d', spendDate=datetime.datetime(2025, 7, 6, 11, 21, 23, 375000, tzi...rname='asd', category=Category(id='4c5e1a5f-1ac9-4333-8291-eb7de41aad84', name='wait', username='asd', archived=False))\nsignin_user = ('asd', 'asd')\n\n    @allure.story(\"Поиск траты по валюте\")\n    def test_search_spending_by_currency(self, page: Page, created_spend, signin_user):\n        # Входные данные для создаваемых трат\n        spend_amount = fake.random_int(min=10, max=10000)\n        spend_description = fake.word()\n        spend_currency = \"KZT\"\n        another_currency = \"RUB\"\n        another_category = fake.word()+\"Test\"\n        now = datetime.now(timezone.utc)\n        spend_date = now.strftime(\"%Y-%m-%dT%H:%M:%S.%f\")[:-3] + \"Z\"\n    \n        # Создаём траты\n        spend_one = created_spend\n>       spend_two = create_spending(signin_user, spend_amount,another_category, another_currency, spend_date, spend_description)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_main.py:173: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsignin_user = ('asd', 'asd'), spend_amount = 3572, spend_category = 'administrationTest', spend_currency = 'RUB', spend_date = '2025-07-06T11:21:23.402Z'\nspend_description = 'some'\n\n    def create_spending(signin_user: str, spend_amount: str, spend_category: str, spend_currency: str, spend_date: str, spend_description: str):\n        headers = {\"Authorization\": f\"Bearer {token}\", \"Accept\": \"*/*\", \"Content-Type\": \"application/json\"}\n        username, _ = signin_user\n        data = {\n            \"spendDate\": spend_date,\n            \"category\": {\n                \"id\": str(uuid.uuid4()),\n                \"name\": spend_category,\n                \"username\": username,\n                \"archived\": False\n            },\n            \"currency\": spend_currency,\n            \"amount\": spend_amount,\n            \"description\": spend_description,\n            \"username\": username\n        }\n        result = requests.post(f\"{base_url}spends/add\", json=data, headers=headers)\n        allure.attach(str(result.request.url), name=\"Request URL\", attachment_type=allure.attachment_type.TEXT)\n        allure.attach(str(data), name=\"Request Body\", attachment_type=allure.attachment_type.JSON)\n        allure.attach(str(result.status_code), name=\"Status Code\", attachment_type=allure.attachment_type.TEXT)\n        allure.attach(result.text, name=\"Response Body\", attachment_type=allure.attachment_type.JSON)\n        print(result.request.body)\n>       assert result.status_code == 201, result.request.body\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: b'{\"spendDate\": \"2025-07-06T11:21:23.402Z\", \"category\": {\"id\": \"7598d1ac-e932-47d4-8376-077c06529903\", \"name\": \"administrationTest\", \"username\": \"asd\", \"archived\": false}, \"currency\": \"RUB\", \"amount\": 3572, \"description\": \"some\", \"username\": \"asd\"}'\n\ntests\\api_controller.py:109: AssertionError"}, "attachments": [{"name": "Request URL", "source": "01b630fb-c9e7-4199-8ebb-c735b3cc177d-attachment.txt", "type": "text/plain"}, {"name": "Request Body", "source": "49bb34b4-17eb-42ea-9ed9-458a834e4a26-attachment.json", "type": "application/json"}, {"name": "Status Code", "source": "1cff5f7c-f311-4c2a-bd14-589ed7c0ca2e-attachment.txt", "type": "text/plain"}, {"name": "Response Body", "source": "ab779615-da53-478a-8cb6-93865444b43e-attachment.json", "type": "application/json"}, {"name": "stdout", "source": "8e1ed1b1-c349-4f11-9cf6-5f1ee4b49e59-attachment.txt", "type": "text/plain"}], "start": 1751800883402, "stop": 1751800883424, "uuid": "3e9008fd-8da2-4189-9571-a1f7518a1773", "historyId": "f38a32a79bff89b55f5c4da558727a35", "testCaseId": "f38a32a79bff89b55f5c4da558727a35", "fullName": "tests.test_main.TestsSearchSpends#test_search_spending_by_currency", "labels": [{"name": "story", "value": "Поиск траты по валюте"}, {"name": "epic", "value": "Страница трат"}, {"name": "feature", "value": "Поиск трат"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_main"}, {"name": "subSuite", "value": "TestsSearchSpends"}, {"name": "host", "value": "WIN-V8TQK9SAURU"}, {"name": "thread", "value": "24696-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_main"}]}