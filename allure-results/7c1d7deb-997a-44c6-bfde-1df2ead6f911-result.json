{"name": "Search Spending By Currency", "status": "failed", "statusDetails": {"message": "AssertionError: b'{\"spendDate\": \"2025-07-06T11:15:21.297Z\", \"category\": {\"id\": \"4aaf0240-9d64-4d4c-9528-01a70dbd343a\", \"name\": \"cellTest\", \"username\": \"asd\", \"archived\": false}, \"currency\": \"RUB\", \"amount\": 4937, \"description\": \"bill\", \"username\": \"asd\"}'", "trace": "self = <tests.test_main.TestsSearchSpends object at 0x000001D669B59950>, page = <Page url='http://frontend.niffler.dc/main'>\ncreated_spend = SpendCreate(id='04fb1d68-c468-4ce1-a330-3d5b2a0e1d83', spendDate=datetime.datetime(2025, 7, 6, 11, 15, 21, 274000, tzi...me='asd', category=Category(id='946262fb-aca3-4530-9cea-2911d1ab322f', name='special', username='asd', archived=False))\nsignin_user = ('asd', 'asd')\n\n    @allure.story(\"Поиск траты по валюте\")\n    def test_search_spending_by_currency(self, page: Page, created_spend, signin_user):\n        # Входные данные для создаваемых трат\n        spend_amount = fake.random_int(min=10, max=10000)\n        spend_description = fake.word()\n        spend_currency = \"KZT\"\n        another_currency = \"RUB\"\n        another_category = fake.word()+\"Test\"\n        now = datetime.now(timezone.utc)\n        spend_date = now.strftime(\"%Y-%m-%dT%H:%M:%S.%f\")[:-3] + \"Z\"\n    \n        # Создаём траты\n        spend_one = created_spend\n>       spend_two = create_spending(signin_user, spend_amount,another_category, another_currency, spend_date, spend_description)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_main.py:173: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsignin_user = ('asd', 'asd'), spend_amount = 4937, spend_category = 'cellTest', spend_currency = 'RUB', spend_date = '2025-07-06T11:15:21.297Z', spend_description = 'bill'\n\n    def create_spending(signin_user: str, spend_amount: str, spend_category: str, spend_currency: str, spend_date: str, spend_description: str):\n      headers = {\"Authorization\": f\"Bearer {token}\", \"Accept\": \"*/*\", \"Content-Type\": \"application/json\"}\n      username, _ = signin_user\n      spend_amount = spend_amount\n      spend_description = spend_description\n      spend_currency = spend_currency\n      category_name = spend_category\n      spend_date = spend_date\n      data = {\n      \"spendDate\": spend_date,\n      \"category\": {\n        \"id\": str(uuid.uuid4()),\n        \"name\": category_name,\n        \"username\": username,\n        \"archived\": False\n        },\n      \"currency\": spend_currency,\n      \"amount\": spend_amount,\n      \"description\": spend_description,\n      \"username\": username\n      }\n    \n      result = requests.post(f\"{base_url}spends/add\", json=data, headers=headers)\n      print(result.request.body)\n>     assert result.status_code == 201, result.request.body\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\nE     AssertionError: b'{\"spendDate\": \"2025-07-06T11:15:21.297Z\", \"category\": {\"id\": \"4aaf0240-9d64-4d4c-9528-01a70dbd343a\", \"name\": \"cellTest\", \"username\": \"asd\", \"archived\": false}, \"currency\": \"RUB\", \"amount\": 4937, \"description\": \"bill\", \"username\": \"asd\"}'\n\ntests\\api_controller.py:101: AssertionError"}, "attachments": [{"name": "stdout", "source": "78f82802-a35c-40e1-b918-f2908285b9ae-attachment.txt", "type": "text/plain"}], "start": 1751800521298, "stop": 1751800521319, "uuid": "8b75e718-c307-4e81-9b6b-3f275e35d5b3", "historyId": "f38a32a79bff89b55f5c4da558727a35", "testCaseId": "f38a32a79bff89b55f5c4da558727a35", "fullName": "tests.test_main.TestsSearchSpends#test_search_spending_by_currency", "labels": [{"name": "epic", "value": "Страница трат"}, {"name": "story", "value": "Поиск траты по валюте"}, {"name": "feature", "value": "Поиск трат"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_main"}, {"name": "subSuite", "value": "TestsSearchSpends"}, {"name": "host", "value": "WIN-V8TQK9SAURU"}, {"name": "thread", "value": "16016-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_main"}]}