{"name": "Search Spending By Category", "status": "failed", "statusDetails": {"message": "AssertionError: b'{\"spendDate\": \"2025-07-06T11:21:21.224Z\", \"category\": {\"id\": \"e2afd855-61f5-4245-9a13-7bdfcedc3b78\", \"name\": \"PMTest\", \"username\": \"asd\", \"archived\": false}, \"currency\": \"RUB\", \"amount\": 4104, \"description\": \"coach\", \"username\": \"asd\"}'", "trace": "self = <tests.test_main.TestsSearchSpends object at 0x00000123BF371A90>, page = <Page url='http://frontend.niffler.dc/main'>\ncreated_spend = SpendCreate(id='ba32ab71-bb24-4452-a3ae-77a81afefe72', spendDate=datetime.datetime(2025, 7, 6, 11, 21, 21, 198000, tzi...sername='asd', category=Category(id='f5626bf7-c3a3-48ca-a87a-6aad6c62a8bc', name='of', username='asd', archived=False))\nsignin_user = ('asd', 'asd')\n\n    @allure.story(\"Поиск траты по категории\")\n    def test_search_spending_by_category(self, page: Page, created_spend, signin_user):\n        # Входные данные для создаваемых трат\n        spend_amount = fake.random_int(min=10, max=10000)\n        spend_description = fake.word()\n        another_currency = \"RUB\"\n        another_category = fake.word()+\"Test\"\n        now = datetime.now(timezone.utc)\n        spend_date = now.strftime(\"%Y-%m-%dT%H:%M:%S.%f\")[:-3] + \"Z\"\n    \n        # Создаём траты\n        spend_one = created_spend\n>       spend_two = create_spending(signin_user, spend_amount,another_category, another_currency, spend_date, spend_description)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests\\test_main.py:139: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nsignin_user = ('asd', 'asd'), spend_amount = 4104, spend_category = 'PMTest', spend_currency = 'RUB', spend_date = '2025-07-06T11:21:21.224Z', spend_description = 'coach'\n\n    def create_spending(signin_user: str, spend_amount: str, spend_category: str, spend_currency: str, spend_date: str, spend_description: str):\n        headers = {\"Authorization\": f\"Bearer {token}\", \"Accept\": \"*/*\", \"Content-Type\": \"application/json\"}\n        username, _ = signin_user\n        data = {\n            \"spendDate\": spend_date,\n            \"category\": {\n                \"id\": str(uuid.uuid4()),\n                \"name\": spend_category,\n                \"username\": username,\n                \"archived\": False\n            },\n            \"currency\": spend_currency,\n            \"amount\": spend_amount,\n            \"description\": spend_description,\n            \"username\": username\n        }\n        result = requests.post(f\"{base_url}spends/add\", json=data, headers=headers)\n        allure.attach(str(result.request.url), name=\"Request URL\", attachment_type=allure.attachment_type.TEXT)\n        allure.attach(str(data), name=\"Request Body\", attachment_type=allure.attachment_type.JSON)\n        allure.attach(str(result.status_code), name=\"Status Code\", attachment_type=allure.attachment_type.TEXT)\n        allure.attach(result.text, name=\"Response Body\", attachment_type=allure.attachment_type.JSON)\n        print(result.request.body)\n>       assert result.status_code == 201, result.request.body\n               ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       AssertionError: b'{\"spendDate\": \"2025-07-06T11:21:21.224Z\", \"category\": {\"id\": \"e2afd855-61f5-4245-9a13-7bdfcedc3b78\", \"name\": \"PMTest\", \"username\": \"asd\", \"archived\": false}, \"currency\": \"RUB\", \"amount\": 4104, \"description\": \"coach\", \"username\": \"asd\"}'\n\ntests\\api_controller.py:109: AssertionError"}, "attachments": [{"name": "Request URL", "source": "1f5a09cb-62eb-4a96-b762-5884a7fbea25-attachment.txt", "type": "text/plain"}, {"name": "Request Body", "source": "9283fffe-3b69-401a-82a2-a0c25a82f5c8-attachment.json", "type": "application/json"}, {"name": "Status Code", "source": "650353ab-ea51-4a19-8b6a-7c1cad54adf2-attachment.txt", "type": "text/plain"}, {"name": "Response Body", "source": "c9c0e331-dd53-4f46-9ca9-3dac310093ee-attachment.json", "type": "application/json"}, {"name": "stdout", "source": "082e5c1e-4d6c-46f0-804a-360a5aee6cc2-attachment.txt", "type": "text/plain"}], "start": 1751800881225, "stop": 1751800881248, "uuid": "d76fdd16-9421-4594-a1f2-b5fb7d307752", "historyId": "b03ba1cf04775d7a1eb4e49ad1d3329d", "testCaseId": "b03ba1cf04775d7a1eb4e49ad1d3329d", "fullName": "tests.test_main.TestsSearchSpends#test_search_spending_by_category", "labels": [{"name": "feature", "value": "Поиск трат"}, {"name": "story", "value": "Поиск траты по категории"}, {"name": "epic", "value": "Страница трат"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_main"}, {"name": "subSuite", "value": "TestsSearchSpends"}, {"name": "host", "value": "WIN-V8TQK9SAURU"}, {"name": "thread", "value": "24696-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_main"}]}